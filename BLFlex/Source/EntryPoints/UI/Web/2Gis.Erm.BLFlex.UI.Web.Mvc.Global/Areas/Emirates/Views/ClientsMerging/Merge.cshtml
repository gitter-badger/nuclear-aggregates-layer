@model DoubleGis.Erm.BLFlex.UI.Web.Mvc.Global.Models.Emirates.EmiratesMergeClientsViewModel

@{
    Layout = "../../../../Views/Shared/_DialogLayout.cshtml";
}

@section Title { @BLResources.MergeRecords }
@section TopBarTitle { @BLResources.MergeRecords }
@section TopBarMessage { @BLResources.MergeRecordsLegend }

@section PageContent
{
    <script src="/Scripts/MergeClients.js?@ThisAssembly.Build" type="text/javascript"></script>
    <script src="/Scripts/Emirates/MergeClients.Emirates.js?@ThisAssembly.Build" type="text/javascript"></script>

    <style type="text/css">
        #header td, #dataRegion td {
            border-bottom: #dddddd 1px solid;
            background-color: #ffffff;
        }

        #dataRegion table td {
            padding: 1px;
            border-bottom: #dddddd 1px solid;
            background-color: #ffffff;
            text-indent: 5px;
        }

        #dataRegion td.datacell.selected {
            border-bottom: #333333 1px solid;
            background-color: #a7cdf0;
            border-top: #ffffff 1px solid;
        }

        #dataRegion td.datacell {
            cursor: pointer;
            white-space: nowrap;
        }

        #dataRegion tr.section-header td {
            background-color: #f0f0f0 !important;
            border-bottom: #000000 1px solid !important;
            cursor: pointer;
        }
    </style>
    @using (Html.BeginForm(null, null, null, FormMethod.Post, new Dictionary<string, object> { { "id", "EntityForm" } }))
    {
        <div style="padding: 5px; overflow: auto; vertical-align: top;">
            <table style="width: 100%; height: 100%; border-collapse: collapse;">
                <colgroup>
                    <col width="165" />
                    <col width="20" />
                    <col />
                </colgroup>
                <tbody>
                    <tr height="20">
                        <td colspan="3">
                            <table style="border-collapse: collapse; border-bottom: medium none; border-left: #889dc2 1px solid;
                            border-top: #889dc2 1px solid; border-right: #889dc2 1px solid; width: 100%;
                            height: 100%;">
                                <colgroup>
                                    <col width="16" />
                                    <col />
                                </colgroup>
                                <tbody>
                                    <tr>
                                        <td style="background-color: #a7cdf0; font-weight: bold;"></td>
                                        <td style="background-color: #a7cdf0; font-weight: bold;">
                                            @BLResources.MergeRecordsSelectMainRecord
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr height="40">
                        <td colspan="3">
                            <table id="header" style="border-collapse: collapse; width: 100%; height: 100%; table-layout: fixed;
                            border-left: #889dc2 1px solid; border-top: #889dc2 1px solid; border-right: #889dc2 1px solid;">
                                <colgroup>
                                    <col width="165" />
                                    <col width="20" />
                                    <col />
                                    <col width="20" />
                                    <col width="20" />
                                    <col />
                                    <col width="20" />
                                </colgroup>
                                <tbody>
                                    <tr height="40">
                                        <td style="font-weight: bold; text-indent: 5px;">
                                            @BLResources.MainRecord
                                        </td>
                                        <td style="text-indent: 5px;">
                                            <input type="radio" name="client" id="client_1" class="rad left" checked="checked" />
                                        </td>
                                        <td>
                                            @Html.LookupFor(m => m.Client1, new LookupSettings { EntityName = EntityType.Instance.Client(), ExtendedInfo = "restrictForMergeId={Client2Id}", ReadOnly = Model.DisableMasterClient })
                                            @Html.ValidationMessageFor(m => m.Client1)
                                        </td>
                                        <td />
                                        <td style="text-indent: 5px;">
                                            <input type="radio" name="client" id="client_2" class="rad right" />
                                        </td>
                                        <td>
                                            @Html.LookupFor(m => m.Client2, new LookupSettings { EntityName = EntityType.Instance.Client(), ExtendedInfo = "restrictForMergeId={Client1Id}" })
                                            @Html.ValidationMessageFor(m => m.Client2)
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="3" id="dataRegion" />
                    </tr>
                    <tr>
                        <td style="vertical-align: bottom">
                            @Html.CheckBoxFor(m => m.AssignAllObjects)
                            @Html.LabelFor(m => m.AssignAllObjects, BLResources.AssignInAllHierarchy, new { style = "font-weight: bold" })
                        </td>
                    </tr>
                    <tr height="5px;">
                        <td />
                    </tr>
                    <tr height="10px;">
                        <td />
                    </tr>
                    <tr height="25px;">
                        <td colspan="3">
                            <div style="visibility: hidden;" id="Notifications" class="Notifications">
                            </div>
                            @Html.Hidden("Id");
                            @Html.Hidden("Timestamp")
                            @Html.Hidden("AppendedClient")
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div style="display: none">
            <div id="MessageType">
                @Model.MessageType
            </div>
            <div id="Message">
                @Model.Message
            </div>
        </div>
    }
}