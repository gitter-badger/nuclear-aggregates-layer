<?xml version="1.0" encoding="utf-8" ?>
<log4net update="Merge">
 
  <root>
    <level value="ERROR" />
    <!--<level value="DEBUG" />
    <appender-ref ref="ConfigAdoNetAppender" />
    <appender-ref ref="Error_JournalAdoNetAppender" />
    <appender-ref ref="Info_JournalAdoNetAppender" />
    <appender-ref ref="Debug_JournalAdoNetAppender" />
    <appender-ref ref="EventLogAppender" />-->
  </root>
  <!--
  <appender name="EventLogAppender" type="log4net.Appender.EventLogAppender">
    <param name="ApplicationName" value="ErmNtService" />
    <param name="LogName" value="2Gis Erm" />

    <filter type="log4net.Filter.LevelRangeFilter">
      <levelMin value="WARN"/>
      <levelMax value="FATAL"/>
    </filter>
    <filter type="log4net.Filter.DenyAllFilter"/>
    <mapping>
      <level value="FATAL" />
      <eventLogEntryType value="Error" />
    </mapping>
    <mapping>
      <level value="ERROR" />
      <eventLogEntryType value="Error" />
    </mapping>
    <mapping>
      <level value="WARN" />
      <eventLogEntryType value="Warning" />
    </mapping>
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%date [%thread] %-5level%newline %message%newline%newline %exception" />
    </layout>
  </appender>

  <appender name="ConfigAdoNetAppender" type="log4net.Appender.AdoNetAppender">
    <filter type="log4net.Filter.LoggerMatchFilter">
      <loggerToMatch value="ConfigLogger" />
    </filter>
    <filter type="log4net.Filter.DenyAllFilter"/>
    <connectionStringName value="ErmLogging"/>
    <connectionType value="System.Data.SqlClient.SqlConnection" />
    <commandText value="[dbo].[WriteSeanceData]" />
    <commandType value="StoredProcedure" />
    <reconnectOnError value="true" />
    <bufferSize value="1" />
    <param name="UseTransactions" value="False" />
    <parameter>
      <parameterName value="@SeanceCode" />
      <dbType value="String" />
      <size value="36" />
      <layout type="log4net.Layout.PatternLayout" value="%property{seanceCode}" />
    </parameter>
    <parameter>
      <parameterName value="@ModuleName" />
      <dbType value="String" />
      <size value="50" />
      <layout type="log4net.Layout.PatternLayout" value="%property{moduleName}" />
    </parameter>
    <parameter>
      <parameterName value="@MessageDate" />
      <dbType value="DateTime" />
      <layout type="log4net.Layout.PatternLayout" value="%date{yyyy'-'MM'-'dd HH':'mm':'ss'.'fff}" />
    </parameter>
    <parameter>
      <parameterName value="@ConfigFile" />
      <dbType value="String" />
      <size value="-1" />
      <layout type="log4net.Layout.PatternLayout" value="%message" />
    </parameter>
  </appender>
  <appender name="Error_JournalAdoNetAppender" type="log4net.Appender.AdoNetAppender">
    <filter type="log4net.Filter.LevelRangeFilter">
      <levelMin value="ERROR" />
      <levelMax value="FATAL" />
    </filter>
    <filter type="log4net.Filter.DenyAllFilter"/>
    <connectionStringName value="ErmLogging"/>
    <connectionType value="System.Data.SqlClient.SqlConnection" />
    <commandText value="[dbo].[WriteLogMessage]" />
    <commandType value="StoredProcedure" />
    <reconnectOnError value="true" />
    <bufferSize value="1" />
    <param name="UseTransactions" value="False" />
    <parameter>
      <parameterName value="@SeanceCode" />
      <dbType value="String" />
      <size value="36" />
      <layout type="log4net.Layout.PatternLayout" value="%property{seanceCode}" />
    </parameter>
    <parameter>
      <parameterName value="@SessionId" />
      <dbType value="String" />
      <size value="24" />
      <layout type="log4net.Layout.PatternLayout" value="%property{sessionId}" />
    </parameter>
    <parameter>
      <parameterName value="@MessageDate" />
      <dbType value="DateTime" />
      <layout type="log4net.Layout.PatternLayout" value="%date{yyyy'-'MM'-'dd HH':'mm':'ss'.'fff}" />
    </parameter>
    <parameter>
      <parameterName value="@MessageLevel" />
      <dbType value="String" />
      <size value="5" />
      <layout type="log4net.Layout.PatternLayout" value="%level" />
    </parameter>
    <parameter>
      <parameterName value="@MessageText" />
      <dbType value="String" />
      <size value="8000" />
      <layout type="log4net.Layout.PatternLayout" value="%message" />
    </parameter>
    <parameter>
      <parameterName value="@ExceptionData" />
      <dbType value="String" />
      <size value="8000" />
      <layout type="log4net.Layout.PatternLayout" value="%exception" />
    </parameter>
    <parameter>
      <parameterName value="@MethodName" />
      <dbType value="String" />
      <size value="250" />
      <layout type="log4net.Layout.PatternLayout" value="%property{methodName}" />
    </parameter>
    <parameter>
      <parameterName value="@InputParameters" />
      <dbType value="String" />
      <size value="1024" />
      <layout type="log4net.Layout.PatternLayout" value="%property{methodParameters}" />
    </parameter>
    <parameter>
      <parameterName value="@UserName" />
      <dbType value="String" />
      <size value="100" />
      <layout type="log4net.Layout.PatternLayout" value="%property{userName}" />
    </parameter>
    <parameter>
      <parameterName value="@UserIP" />
      <dbType value="String" />
      <size value="50" />
      <layout type="log4net.Layout.PatternLayout" value="%property{userIP}" />
    </parameter>
    <parameter>
      <parameterName value="@UserBrowser" />
      <dbType value="String" />
      <size value="100" />
      <layout type="log4net.Layout.PatternLayout" value="%property{userBrowser}" />
    </parameter>
  </appender>
  <appender name="Info_JournalAdoNetAppender" type="log4net.Appender.AdoNetAppender">
    <filter type="log4net.Filter.LevelMatchFilter">
      <levelToMatch  value="ERROR" />
      <acceptOnMatch value="false" />
    </filter>
    <filter type="log4net.Filter.LevelMatchFilter">
      <levelToMatch  value="FATAL" />
      <acceptOnMatch value="false" />
    </filter>
    <filter type="log4net.Filter.LevelMatchFilter">
      <levelToMatch  value="DEBUG" />
      <acceptOnMatch value="false" />
    </filter>
    <filter type="log4net.Filter.LoggerMatchFilter">
      <loggerToMatch value="ConfigLogger" />
      <acceptOnMatch value="false" />
    </filter>
    <connectionStringName value="ErmLogging"/>
    <connectionType value="System.Data.SqlClient.SqlConnection" />
    <commandText value="[dbo].[WriteLogMessage]" />
    <commandType value="StoredProcedure" />
    <reconnectOnError value="true" />
    <bufferSize value="1" />
    <param name="UseTransactions" value="False" />
    <parameter>
      <parameterName value="@SeanceCode" />
      <dbType value="String" />
      <size value="36" />
      <layout type="log4net.Layout.PatternLayout" value="%property{seanceCode}" />
    </parameter>
    <parameter>
      <parameterName value="@SessionId" />
      <dbType value="String" />
      <size value="24" />
      <layout type="log4net.Layout.PatternLayout" value="%property{sessionId}" />
    </parameter>
    <parameter>
      <parameterName value="@MessageDate" />
      <dbType value="DateTime" />
      <layout type="log4net.Layout.PatternLayout" value="%date{yyyy'-'MM'-'dd HH':'mm':'ss'.'fff}" />
    </parameter>
    <parameter>
      <parameterName value="@MessageLevel" />
      <dbType value="String" />
      <size value="5" />
      <layout type="log4net.Layout.PatternLayout" value="%level" />
    </parameter>
    <parameter>
      <parameterName value="@MessageText" />
      <dbType value="String" />
      <size value="8000" />
      <layout type="log4net.Layout.PatternLayout" value="%message" />
    </parameter>
    <parameter>
      <parameterName value="@ExceptionData" />
      <dbType value="String" />
      <size value="8000" />
      <layout type="log4net.Layout.PatternLayout" value="%exception" />
    </parameter>
    <parameter>
      <parameterName value="@MethodName" />
      <dbType value="String" />
      <size value="250" />
      <layout type="log4net.Layout.PatternLayout" value="%property{methodName}" />
    </parameter>
    <parameter>
      <parameterName value="@InputParameters" />
      <dbType value="String" />
      <size value="1024" />
      <layout type="log4net.Layout.PatternLayout" value="%property{methodParameters}" />
    </parameter>
    <parameter>
      <parameterName value="@UserName" />
      <dbType value="String" />
      <size value="100" />
      <layout type="log4net.Layout.PatternLayout" value="%property{userName}" />
    </parameter>
    <parameter>
      <parameterName value="@UserIP" />
      <dbType value="String" />
      <size value="50" />
      <layout type="log4net.Layout.PatternLayout" value="%property{userIP}" />
    </parameter>
    <parameter>
      <parameterName value="@UserBrowser" />
      <dbType value="String" />
      <size value="100" />
      <layout type="log4net.Layout.PatternLayout" value="%property{userBrowser}" />
    </parameter>
  </appender>

  <appender name="Debug_JournalAdoNetAppender" type="log4net.Appender.AdoNetAppender">
    <filter type="log4net.Filter.LevelMatchFilter">
      <levelToMatch  value="DEBUG" />
      <acceptOnMatch value="true" />
    </filter>
    <filter type="log4net.Filter.DenyAllFilter"/>
    <connectionStringName value="ErmLogging"/>
    <connectionType value="System.Data.SqlClient.SqlConnection" />
    <commandText value="[dbo].[WriteLogMessage]" />
    <commandType value="StoredProcedure" />
    <reconnectOnError value="true" />
    <bufferSize value="5" />
    <param name="UseTransactions" value="False" />
    <parameter>
      <parameterName value="@SeanceCode" />
      <dbType value="String" />
      <size value="36" />
      <layout type="log4net.Layout.PatternLayout" value="%property{seanceCode}" />
    </parameter>
    <parameter>
      <parameterName value="@SessionId" />
      <dbType value="String" />
      <size value="24" />
      <layout type="log4net.Layout.PatternLayout" value="%property{sessionId}" />
    </parameter>
    <parameter>
      <parameterName value="@MessageDate" />
      <dbType value="DateTime" />
      <layout type="log4net.Layout.PatternLayout" value="%date{yyyy'-'MM'-'dd HH':'mm':'ss'.'fff}" />
    </parameter>
    <parameter>
      <parameterName value="@MessageLevel" />
      <dbType value="String" />
      <size value="5" />
      <layout type="log4net.Layout.PatternLayout" value="%level" />
    </parameter>
    <parameter>
      <parameterName value="@MessageText" />
      <dbType value="String" />
      <size value="8000" />
      <layout type="log4net.Layout.PatternLayout" value="%message" />
    </parameter>
    <parameter>
      <parameterName value="@ExceptionData" />
      <dbType value="String" />
      <size value="8000" />
      <layout type="log4net.Layout.PatternLayout" value="%exception" />
    </parameter>
    <parameter>
      <parameterName value="@MethodName" />
      <dbType value="String" />
      <size value="250" />
      <layout type="log4net.Layout.PatternLayout" value="%property{methodName}" />
    </parameter>
    <parameter>
      <parameterName value="@InputParameters" />
      <dbType value="String" />
      <size value="1024" />
      <layout type="log4net.Layout.PatternLayout" value="%property{methodParameters}" />
    </parameter>
    <parameter>
      <parameterName value="@UserName" />
      <dbType value="String" />
      <size value="100" />
      <layout type="log4net.Layout.PatternLayout" value="%property{userName}" />
    </parameter>
    <parameter>
      <parameterName value="@UserIP" />
      <dbType value="String" />
      <size value="50" />
      <layout type="log4net.Layout.PatternLayout" value="%property{userIP}" />
    </parameter>
    <parameter>
      <parameterName value="@UserBrowser" />
      <dbType value="String" />
      <size value="100" />
      <layout type="log4net.Layout.PatternLayout" value="%property{userBrowser}" />
    </parameter>
  </appender>-->

</log4net>